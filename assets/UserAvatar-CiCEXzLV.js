import{s as g,q as i,g as p,w as a,o,v as s,x as k,K as y,L as E,j as r,aU as _,B as d,bP as w,bQ as x,E as B}from"./index-Ds4Ljw_i.js";import{E as b}from"./el-button-DwTVjs2M.js";import{E as A}from"./el-progress-BSd-f0Oj.js";import{P as S}from"./PageContainer-lwgJSOxo.js";import"./el-message-CxDoke59.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./isEqual--Q6XVOVu.js";const R=["src"],N={__name:"UserAvatar",setup(P){const l=g(),t=i(l.user.user_pic),n=i(),f=u=>{const e=new FileReader;e.readAsDataURL(u.raw),e.onload=()=>{t.value=e.result}},m=async()=>{await x(t.value),await l.getUser(),B.success("头像更新成功")};return(u,e)=>{const v=E,U=A,c=b;return o(),p(S,{title:"更换头像"},{default:a(()=>[s(U,{ref_key:"uploadRef",ref:n,"auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":f},{default:a(()=>[t.value?(o(),y("img",{key:0,src:t.value,class:"avatar"},null,8,R)):(o(),p(v,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[s(r(_))]),_:1}))]),_:1},512),e[3]||(e[3]=k("br",null,null,-1)),s(c,{onClick:e[0]||(e[0]=V=>n.value.$el.querySelector("input").click()),type:"primary",icon:r(_),size:"large"},{default:a(()=>e[1]||(e[1]=[d("选择头像")])),_:1,__:[1]},8,["icon"]),s(c,{onClick:m,type:"success",icon:r(w),size:"large"},{default:a(()=>e[2]||(e[2]=[d("上传头像")])),_:1,__:[2]},8,["icon"])]),_:1,__:[3]})}}},D=C(N,[["__scopeId","data-v-0bffd978"]]);export{D as default};
