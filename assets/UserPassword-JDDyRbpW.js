import{q as p,s as v,g as c,w as t,o as b,v as o,B as m,b$ as E,E as V,F as S}from"./index-Ds4Ljw_i.js";import{E as k,a as F}from"./el-form-item-DFNmFRi_.js";import{E as U}from"./el-button-DwTVjs2M.js";import{E as P}from"./el-input-DiDiLEzi.js";import{P as x}from"./PageContainer-lwgJSOxo.js";import"./el-message-CxDoke59.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const h={__name:"UserPassword",setup(q){const u=p(),r=p({old_pwd:"",new_pwd:"",re_pwd:""}),w={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,e,l)=>{e===r.value.old_pwd?l(new Error("新密码不能与原密码一样")):l()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,e,l)=>{e!==r.value.new_pwd?l(new Error("确认密码必须和新密码一样")):l()},trigger:"blur"}]},i=v(),_=async()=>{await u.value.validate(),await E(r.value),V.success("密码修改成功"),i.setUser(),S.push("/login")},f=()=>{u.value.resetFields()};return(d,e)=>{const l=P,a=F,n=U,g=k;return b(),c(x,{title:"修改密码"},{default:t(()=>[o(g,{ref_key:"formRef",ref:u,model:r.value,rules:w,"label-width":"100px"},{default:t(()=>[o(a,{label:"原密码",prop:"old_pwd"},{default:t(()=>[o(l,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.old_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(a,{label:"新密码",prop:"new_pwd"},{default:t(()=>[o(l,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.new_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(a,{label:"确认密码",prop:"re_pwd"},{default:t(()=>[o(l,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.re_pwd=s),"show-password":""},null,8,["modelValue"])]),_:1}),o(a,null,{default:t(()=>[o(n,{type:"primary",onClick:_},{default:t(()=>e[3]||(e[3]=[m("修改密码")])),_:1,__:[3]}),o(n,{onClick:f},{default:t(()=>e[4]||(e[4]=[m("重置")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{h as default};
